---
import { REPO_PREFIX } from '@/constants'
import BaseLayout from '@/layouts/BaseLayout.astro'
import siteConfig from '@/site-config'
import { getPosts } from '@/utils/posts'
import ListPosts from '@/components/ListPosts.vue'
import ListProjects from '@/components/ListProjects.vue'
import { projectData } from '@/pages/projects/data'

const recentPosts = (await getPosts()).slice(0, 5)
const featuredProjects = projectData
  .flatMap((group) => group.projects)
  .filter((project) => project.href && project.href !== '/')
  .slice(0, 6)
---

<BaseLayout description={siteConfig.description}>
  <!-- Hero Section -->
  <section class="mb-8 sm:mb-16">
    <h1 class="text-title mb-4">
      {siteConfig.author}
    </h1>
    <p class="text-xl opacity-80 mb-6">Software Engineer</p>
    <p class="mb-8">
      Building scalable applications and solving complex problems with clean code. Passionate about software
      architecture, cloud technologies, and continuous learning.
    </p>
    <div class="flex gap-x-4 gap-y-2 flex-wrap items-center">
      {
        siteConfig.socialLinks
          .filter((link) => link.href)
          .map((link) => (
            <a aria-label={link.text} href={link.href} target="_blank" class="prose-link flex items-center gap-2">
              <i class:list={[link.icon]} />
              <span>{link.text}</span>
            </a>
          ))
      }
    </div>
  </section>

  <!-- Recent Posts -->
  {
    recentPosts.length > 0 && (
      <section class="mb-8 sm:mb-16">
        <div class="flex items-center justify-between mb-8">
          <h2 class="text-2xl font-bold">Recent Posts</h2>
          <a href={`/${REPO_PREFIX}/blog`} class="prose-link text-sm flex items-center gap-1">
            View all
            <i class="i-ri-arrow-right-line" />
          </a>
        </div>
        <ListPosts list={recentPosts} />
      </section>
    )
  }

  <!-- Featured Projects -->
  {
    featuredProjects.length > 0 && (
      <section class="mb-8 sm:mb-16">
        <div class="flex items-center justify-between mb-8">
          <h2 class="text-2xl font-bold">Featured Projects</h2>
          <a href={`/${REPO_PREFIX}/projects`} class="prose-link text-sm flex items-center gap-1">
            View all
            <i class="i-ri-arrow-right-line" />
          </a>
        </div>
        <ListProjects list={featuredProjects} />
      </section>
    )
  }

  <!-- Skills & Technologies
  <section class="mb-8 sm:mb-16">
    <h2 class="text-2xl font-bold mb-6">Skills & Technologies</h2>
    <div class="prose max-w-none mb-0 min-h-fit">
      <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
        <div>
          <h3 class="text-lg font-semibold mb-2">Languages</h3>
          <ul class="list-none p-0">
            <li>TypeScript / JavaScript</li>
            <li>Python</li>
          </ul>
        </div>
        <div>
          <h3 class="text-lg font-semibold mb-2">Frameworks</h3>
          <ul class="list-none p-0">
            <li>React / Vue</li>
            <li>Astro</li>
            <li>Node.js</li>
            <li>Express</li>
          </ul>
        </div>
        <div>
          <h3 class="text-lg font-semibold mb-2">Cloud & Tools</h3>
          <ul class="list-none p-0">
            <li>AWS</li>
            <li>Docker</li>
            <li>Git</li>
            <li>CI/CD</li>
          </ul>
        </div>
      </div>
    </div>
  </section> -->

  <!-- Contact Section -->
  <section class="mb-8">
    <h2 class="text-2xl font-bold mb-6">Get in Touch</h2>
    <div class="prose max-w-none mb-0 min-h-fit">
      <p>I'm always open to discussing new projects, creative ideas, or opportunities to be part of your visions.</p>
      <p>
        Feel free to reach out via email at{' '}
        <a prose-link aria-label={siteConfig.email} href={`mailto:${siteConfig.email}`}>
          {siteConfig.email}
        </a>
        {' '}or connect with me on social media.
      </p>
    </div>
  </section>
</BaseLayout>
